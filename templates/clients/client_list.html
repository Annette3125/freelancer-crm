{% extends "base.html" %}

{% block title %}Clients{% endblock %}

{% block content %}

    <h1>Clients</h1>

    <p>
        <a href="{% url 'client_create' %}">+ New client</a>
    </p>

    <p>
        <strong>Summary (all clients):</strong>
        Total: {{ total_all }} |
        Lead: {{ lead_count }} |
        Active: {{ active_count }} |
        Paused: {{ paused_count }} |
        Completed: {{ completed_count }}
    </p>

    <p>
        <strong>Currently shown:</strong> {{ total }} client{% if total != 1 %}s{% endif %}
    </p>


<form method="get">
    <label for="status-filter"><strong>Status filter:</strong></label>
    <select name="status" id="status-filter">
        <option value="">All</option>
        {% for value, label in status_choices %}
            <option value="{{ value }}"{% if value == status %} selected{% endif %}>
                {{ label }}
            </option>
        {% endfor %}
    </select>
    <button type="submit">Apply</button>
</form>

<hr>

<table border="1">
        <tr>
            <th>Name</th>
            <th>Company</th>
            <th>Country</th>
            <th>Status</th>
            <th>Email</th>
        </tr>
        {% for client in clients %}
        <tr>
            <td>
  <a href="{% url 'client_detail' client.pk %}">{{ client.name }}</a>
</td>
            <td>{{ client.company }}</td>
            <td>{{ client.country }}</td>

            <td>
    {% if client.status == "lead" %}
        <span class="status-badge status-lead">{{ client.get_status_display }}</span>
    {% elif client.status == "active" %}
        <span class="status-badge status-active">{{ client.get_status_display }}</span>
    {% elif client.status == "paused" %}
        <span class="status-badge status-paused">{{ client.get_status_display }}</span>
    {% elif client.status == "completed" %}
        <span class="status-badge status-completed">{{ client.get_status_display }}</span>
    {% else %}
        {{ client.get_status_display }}
    {% endif %}
</td>

            <td>{{ client.email }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5">No clients yet.</td>
        </tr>
        {% endfor %}
    </table>
{% endblock %}
